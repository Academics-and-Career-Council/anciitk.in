(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[4],{105:function(e,t,n){"use strict";var r=n(106),c=n.n(r),a=n(83),o=n.n(a),i=n(0),s=n.n(i),E=n(12),u=n(50),l=n(7);t.a=function(e){var t=Object(E.g)();s.a.useEffect((function(){window.document.title="An Error Occured!"}));return Object(l.jsx)(c.a,{status:e.id||500,title:e.id||"Internal Server Error",subTitle:function(){switch(e.id.toString()){case"403":return"Sorry, You are not authorized to view this page!";case"404":return"Sorry, the page you visited does not exist.";case"500":return"We have some troubles connecting to our servers. Try again shortlye!";default:return"We have some troubles connecting to our servers. Try again shortly!"}}()||"Unknown Error",extra:Object(l.jsx)(u.b,{to:"/home",children:Object(l.jsx)(o.a,{type:"primary",onClick:function(){"404"!==e.id.toString()?t.goBack():"403"===e.id.toString()?t.push("/login"):window.location.reload()},children:"Back Home"})})})}},174:function(e,t,n){},175:function(e,t,n){},286:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(25),o=n.n(a),i=(n(174),n(175),n(41)),s=n(95),E=n(50),u=n(12),l=n(35),b=n(58),O=n(43),j=n(8),h=n(66),d=n(2),p=n(15),f=n.n(p),R=n(42),g=function(e,t){var n=Object(r.useState)(!0),c=Object(d.a)(n,2),a=c[0],o=c[1],i=Object(r.useState)(!1),s=Object(d.a)(i,2),E=s[0],u=s[1],O=Object(l.c)(b.a),h=Object(d.a)(O,2),p=h[0],g=h[1],S=function(){var n=Object(R.a)(f.a.mark((function n(){var r,c,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.whoami(void 0,void 0,{withCredentials:!0});case 3:if(200!==(r=n.sent).status){n.next=14;break}return n.next=7,t.whoami();case 7:c=n.sent,i=c.role,g(Object(j.a)(Object(j.a)({},r.data),{},{role:i})),console.log(r,a),o(!1),n.next=15;break;case 14:401===r.status&&(console.log(a,r),o(!1));case 15:n.next=22;break;case 17:n.prev=17,n.t0=n.catch(0),console.log(a),u(!0),o(!1);case 22:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}(),v=Object(r.useCallback)((function(){p.active?o(!1):S()}),[p]);return Object(r.useEffect)((function(){v()}),[v]),[a,E,p]},S=n(105),v=n(18),m=n(94),_=n.n(m),A=n(56),w=new function e(t){var n=this;Object(v.a)(this,e),this.baseUrl=void 0,this.whoami=Object(R.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){_.a.get(n.baseUrl,{withCredentials:!0}).then((function(t){e(t.data)})).catch((function(){e({message:"failed",role:i.a.ADMIN})}))})));case 1:case"end":return e.stop()}}),e)}))),this.baseUrl=t}("".concat(A.b,"/.rogue/whoami")),T=n(57),C=n(7),U=function(e){var t=g(T.b,w),n=Object(d.a)(t,3),r=n[0],a=n[1],o=n[2];console.log(r,o);var i=e.component,s=e.loaderComponent,E=e.routeRedirect,l=e.path,b=Object(h.a)(e,["component","loaderComponent","routeRedirect","path"]);return Object(C.jsxs)(c.a.Fragment,{children:[r&&Object(C.jsx)(s,{}),!r&&(o.active?Object(C.jsx)(u.b,Object(j.a)(Object(j.a)({},b),{},{path:l,exact:!0,render:function(e){return a?Object(C.jsx)(S.a,{id:403}):Object(C.jsx)(i,Object(j.a)({},e))}})):Object(C.jsx)(u.a,{to:{pathname:E}}))]})},x=Object(r.lazy)((function(){return Promise.all([n.e(9),n.e(16)]).then(n.bind(null,1228))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,1229))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(8)]).then(n.bind(null,1234))})),N=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,1230))})),D=Object(r.lazy)((function(){return Promise.all([n.e(2),n.e(15)]).then(n.bind(null,1237))})),k=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(6)]).then(n.bind(null,1235))})),y=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(10),n.e(17)]).then(n.bind(null,1236))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(13)]).then(n.bind(null,1231))})),F=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,1232))})),P=function(){var e=Object(l.d)(b.a).role;return T.b.whoami(void 0,void 0,{withCredentials:!0}).then().catch(),Object(C.jsx)(s.a,{rules:i.c,roles:[e],children:Object(C.jsx)(E.a,{basename:"/courses",children:Object(C.jsx)(u.d,{children:Object(C.jsxs)(r.Suspense,{fallback:Object(C.jsx)(O.a,{}),children:[Object(C.jsx)(u.b,{path:"/test/cpanel",component:L}),Object(C.jsx)(U,{path:"/cpanel",component:L,loaderComponent:O.a,routeRedirect:"/login"}),Object(C.jsx)(U,{path:"/course/:cid",component:k,loaderComponent:O.a,routeRedirect:"/login"}),Object(C.jsx)(U,{path:"/search",component:y,loaderComponent:O.a,routeRedirect:"/login"}),Object(C.jsx)(U,{path:"/files/:fid/:fname",component:x,loaderComponent:O.a,routeRedirect:"/login"}),Object(C.jsx)(u.b,{path:"/login",component:I}),Object(C.jsx)(u.b,{path:"/registration",component:N}),Object(C.jsx)(u.b,{path:"/recovery",component:M}),Object(C.jsx)(u.b,{path:"/settings",component:F}),Object(C.jsx)(u.b,{path:"/",exact:!0,component:D})]})})})})},V=function(e){e&&e instanceof Function&&n.e(18).then(n.bind(null,1233)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(l.a,{children:Object(C.jsx)(P,{})})}),document.getElementById("root")),V()},38:function(e,t,n){"use strict";var r=n(56);t.a={kratos:{browser:"https://anciitk.herokuapp.com/.ory/kratos/public",admin:"http://127.0.0.1:4434",public:"https://anciitk.herokuapp.com/.ory/kratos/public"},register:"".concat(r.b,"/register"),baseUrl:"https://anciitk.herokuapp.com/",projectName:"SecureApp",routes:{settings:{path:"/settings"},recovery:{path:"/recovery"},verification:{path:"/verify"},login:{path:"/login"},registration:{path:"/registration"}}}},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u}));var r,c,a,o,i,s,E=n(3);!function(e){e.LOGIN_CPANEL="LOGIN_CPANEL",e.CREATE_COURSE="CREATE_USER",e.MODIFY_COURSE="EDIT_POST",e.DELETE_COURSE="DELETE_COURSE",e.CREATE_REVIEW="CREATE_REVIEW",e.MODERATE_REVIEW="MODERATE_REVIEW",e.CREATE_FILE="CREATE_FILE",e.DELETE_FILE="DELETE_FILE",e.ELEVATE_USER="ELEVATE_USER",e.DEMOTE_USER="DEMOTE_USER",e.BAN_USER="BAN_USER"}(i||(i={})),function(e){e.BANNED="BANNED",e.ANONYMOUS="ANONYMOUS",e.USER="USER",e.MANAGER="MANAGER",e.ADMIN="ADMIN"}(s||(s={}));var u=(o={},Object(E.a)(o,s.ADMIN,(r={},Object(E.a)(r,i.LOGIN_CPANEL,!0),Object(E.a)(r,i.CREATE_COURSE,!0),Object(E.a)(r,i.MODIFY_COURSE,!0),Object(E.a)(r,i.DELETE_COURSE,!0),Object(E.a)(r,i.CREATE_REVIEW,!0),Object(E.a)(r,i.MODERATE_REVIEW,!0),Object(E.a)(r,i.CREATE_FILE,!0),Object(E.a)(r,i.DELETE_FILE,!0),Object(E.a)(r,i.ELEVATE_USER,!0),Object(E.a)(r,i.DEMOTE_USER,!0),Object(E.a)(r,i.DEMOTE_USER,!0),Object(E.a)(r,i.BAN_USER,!0),r)),Object(E.a)(o,s.MANAGER,(c={},Object(E.a)(c,i.LOGIN_CPANEL,!0),Object(E.a)(c,i.CREATE_COURSE,!0),Object(E.a)(c,i.MODIFY_COURSE,!0),Object(E.a)(c,i.DELETE_COURSE,!1),Object(E.a)(c,i.CREATE_REVIEW,!0),Object(E.a)(c,i.MODERATE_REVIEW,!0),Object(E.a)(c,i.CREATE_FILE,!0),Object(E.a)(c,i.DELETE_FILE,!1),Object(E.a)(c,i.ELEVATE_USER,!1),Object(E.a)(c,i.DEMOTE_USER,!1),Object(E.a)(c,i.DEMOTE_USER,!1),Object(E.a)(c,i.BAN_USER,!1),c)),Object(E.a)(o,s.USER,(a={},Object(E.a)(a,i.LOGIN_CPANEL,!1),Object(E.a)(a,i.CREATE_COURSE,!1),Object(E.a)(a,i.MODIFY_COURSE,!1),Object(E.a)(a,i.DELETE_COURSE,!1),Object(E.a)(a,i.CREATE_REVIEW,!0),Object(E.a)(a,i.MODERATE_REVIEW,!1),Object(E.a)(a,i.CREATE_FILE,!1),Object(E.a)(a,i.DELETE_FILE,!1),Object(E.a)(a,i.ELEVATE_USER,!1),Object(E.a)(a,i.DEMOTE_USER,!1),Object(E.a)(a,i.DEMOTE_USER,!1),Object(E.a)(a,i.BAN_USER,!1),a)),Object(E.a)(o,s.ANONYMOUS,{}),o)},43:function(e,t,n){"use strict";var r=n(96),c=n.n(r),a=(n(0),n(7));t.a=function(){return Object(a.jsx)(c.a,{tip:"Loading...",children:Object(a.jsx)("div",{style:{width:"100%",height:"100vh"}})})}},56:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var r="https://anciitk.herokuapp.com",c=[{name:"Kratos",url:"https://reqres.in/api/users?page=2"},{name:"Oathkeeper",url:"http://adasd"},{name:"NGINX",url:"http://adasd"}]},57:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(143),c=n(38),a=new r.PublicApi({basePath:c.a.kratos.browser}),o=function(e){var t=e.type,n={login:"".concat(c.a.kratos.browser,"/self-service/login/browser"),register:"".concat(c.a.kratos.browser,"/self-service/registration/browser?refresh=true"),settings:"".concat(c.a.kratos.browser,"/self-service/settings/browser"),verify:"".concat(c.a.kratos.public,"/self-service/browser/flows/verification/init/email"),recover:"".concat(c.a.kratos.public,"/self-service/recovery/browser")};return new Promise((function(e,r){var c=new URLSearchParams(window.location.search).get("flow")||"";console.log(c);var o,i=n[t];return c?("login"===t?o=a.getSelfServiceLoginFlow(c,{withCredentials:!0}):"register"===t?o=a.getSelfServiceRegistrationFlow(c,{withCredentials:!0}):"settings"===t?o=a.getSelfServiceSettingsFlow(c,{withCredentials:!0}):"recover"===t&&(o=a.getSelfServiceRecoveryFlow(c,{withCredentials:!0})),o?(console.log(o),void o.then((function(t){if(console.log(t),200!==t.status)return r(t);e(t.data)})).catch((function(e){return console.log(e),r()}))):r()):window.location.href=i}))}},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(41),c=n(35),a=Object(c.b)({key:"SESSION_STATE",default:{active:!1,role:r.a.ADMIN}})}},[[286,5,7]]]);
//# sourceMappingURL=main.4bbac66e.chunk.js.map